# Template de Tarefa – Board do Projeto

> Este arquivo segue o template oficial do board.

---

## Identificação
- **ID da tarefa:** API-025
- **Título curto:** Gerar salário e recorrências automaticamente no mês
- **Status:** TO-DO
- **Responsável (agente):** Codex (GPT-5)
- **Reasoning effort:** Medium

---

## Contexto
O desk check indicou que a geração mensal de salário e recorrências deve ocorrer
automaticamente no primeiro acesso do mês, e não apenas por endpoints manuais.

---

## Escopo da Tarefa
### Inclui
- Disparar geração automática de salário e recorrências no acesso ao mês.
- Garantir que a geração automática não duplique transações.
- Ajustar testes para refletir a geração automática.

### Não inclui (importante)
- Alterar regras de datas inválidas (tratado em tarefa própria).
- Mudar comportamento do dashboard sem decisão explícita.

---

## Regras de Negócio Relacionadas
- ideias.md: 6 (Recorrências), 7 (Salário)
- regras-de-negocio.md: 5.3 (Geração ao iniciar o mês), 7.4 (Confirmação)
- modelos-json.md: 4.6 (Salário), 5.3 (Recorrências)

---

## Arquivos Impactados
- `server/data/transactions-repository.js`
- `server/data/recurring-repository.js`
- `server/data/salary-repository.js`
- `server/tests/api.test.js`

---

## Passos de Implementação Esperados
1. Definir o ponto de entrada para geração automática (ex.: listagem do mês).
2. Implementar checagem de "mês já gerado" antes de gerar novamente.
3. Integrar geração de recorrências e salário nesse fluxo.
4. Atualizar testes.

> O agente pode ajustar os passos, mas **não pode sair do escopo**.

---

## Critérios de Aceite
A tarefa só pode ser movida para **DONE** se **todos** forem verdadeiros:
- [ ] Salário e recorrências são gerados automaticamente no primeiro acesso do mês.
- [ ] Geração automática não cria duplicidade.
- [ ] Testes passam.

---

## Como Testar (Manual)
1. Acessar `GET /transactions/:month` em um mês sem dados e validar geração.
2. Repetir o acesso e validar que não há duplicação.

---

## Pendências / Observações
- Definir heurística de "mês já gerado" (marcador em meta vs detecção no arquivo).
- Confirmar se o dashboard também deve disparar geração automática.
