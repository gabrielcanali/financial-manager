# Template de Tarefa – Board do Projeto

> Este arquivo serve como **esqueleto obrigatório** para qualquer tarefa dentro de `docs/board`.
> O agente **não pode** criar tarefas fora deste formato.

---

## Identificação
- **ID da tarefa:** API-004
- **Título curto:** Transações manuais por mês (CRUD)
- **Status:** DONE
- **Responsável (agente):** GPT-5.1-Codex-Max
- **Reasoning effort:** High

---

## Contexto
As transações são persistidas por mês em arquivos JSON e possuem campos mínimos definidos. A API precisa suportar operações básicas de CRUD para transações manuais, com validações e respeito à regra de criação de arquivo mensal apenas quando há movimentação.

---

## Escopo da Tarefa
### Inclui
- Criar, listar, editar e excluir transações manuais em `transactions/YYYY-MM.json`.
- Validar campos obrigatórios e formato de data.
- Exigir `amount > 0` e usar `direction` para o sinal lógico.
- Criar o arquivo mensal apenas quando houver movimentação e removê-lo quando ficar vazio.

### Não inclui (importante)
- Recorrências, parcelamentos e salário.
- Categorização automática.

---

## Regras de Negócio Relacionadas
- ideias.md: 3.1, 4.1, 4.3, 11.1
- regras-de-negocio.md: 2.1, 3.1, 3.3, 3.4
- modelos-json.md: 3

---

## Arquivos Impactados
- `server/...`

---

## Passos de Implementação Esperados
1. Implementar repositório de transações mensais usando o utilitário de persistência.
2. Implementar validações de campos obrigatórios e formato de data.
3. Garantir criação e remoção do arquivo mensal conforme movimentação.

> O agente pode ajustar os passos, mas **não pode sair do escopo**.

---

## Critérios de Aceite
A tarefa só pode ser movida para **DONE** se **todos** forem verdadeiros:
- [ ] Regra de negócio respeitada
- [ ] Persistência segue o modelo JSON
- [ ] Não houve criação de funcionalidade fora do escopo
- [ ] Fluxo mínimo funcional validado manualmente

---

## Como Testar (Manual)
1. Criar uma transação manual válida em um mês sem arquivo existente.
2. Verificar que `transactions/YYYY-MM.json` foi criado e contém a transação.
3. Excluir a última transação do mês e confirmar que o arquivo mensal é removido.

---

## Pendências / Observações
- Nenhuma.
